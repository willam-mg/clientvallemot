<!-- <button mat-flat-button class="full-width mt-4 mb-5" *ngIf="userData.type == 1" color="accent"
    (click)="printOrdenSalida()">
    <mat-icon>print</mat-icon>
    Imprimir salida
</button> -->


<button mat-icon-button *ngIf="userData.type == 1" class="button-edit-menu" [routerLink]="['/ordenes/edit']" [queryParams]="{id:model.id}">
    <mat-icon>edit</mat-icon>
</button>
<div class="row row-mobile">
    <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8 mx-auto">
        <mat-card class="card-mobile">
            <img class="d-block d-sm-block d-md-none d-lg-none d-xl-none" mat-card-image src="{{model.foto}}" alt="foto" *ngIf="model.foto">
            <mat-card-content>
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
                        <img class="d-none d-sm-none d-md-block d-lg-block d-xl-block" mat-card-image src="{{model.foto}}" alt="foto" *ngIf="model.foto">
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                <p>
                                    <b>Vehiculo</b>
                                    <span class="text-capitalize">
                                        {{model.vehiculo}}
                                    </span>
                                </p>
                                <p>
                                    <b>Placa</b>
                                    <span class="text-capitalize">
                                        {{model.placa}}
                                    </span>
                                </p>
                                <p>
                                    <b>Modelo</b>
                                    <span class="text-capitalize">
                                        {{model.modelo}}
                                    </span>
                                </p>
                                <p>
                                    <b>Tanque</b>
                                    <span class="text-capitalize">
                                        {{model.tanque}}
                                    </span>
                                </p>
                            </div>
                            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                <p>
                                    <b>Color</b>
                                    <span class="text-capitalize">
                                        {{model.color}}
                                    </span>
                                </p>
                                <p>
                                    <b>AÃ±o</b>
                                    <span class="text-capitalize">
                                        {{model.ano}}
                                    </span>
                                </p>
                            </div>
                        </div>

                    </div>
                </div>

                <mat-divider></mat-divider>

                <div class="row mt-3 mb-3">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center">
                        <mat-chip-list>
                            <mat-chip *ngIf="model.estado == 1">
                                <mat-icon>done</mat-icon>
                                Terminado
                            </mat-chip>
                            <mat-chip color="warn" *ngIf="model.estado == 0">
                                <mat-icon>visibility</mat-icon> 
                                En espera
                            </mat-chip>
                        </mat-chip-list>
                    </div>
                </div>

                
                <div class="row mt-3">
                    <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                        <strong>Propietario</strong>
                        <span class="text-capitalize">
                            {{model.propietario}}
                        </span>
                    </div>
                    <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                        <strong>Telf.</strong>
                        <span class="text-capitalize">
                            {{model.telefono}}
                        </span>
                    </div>
                    <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                        <strong>Fecha de ingreso</strong>
                        <span class="text-capitalize">
                            {{model.fecha}}
                        </span>
                    </div>
                    <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                        <strong>Fecha de salida</strong>
                        <span class="text-capitalize">
                            {{model.fecha_salida}}
                        </span>
                    </div>
                </div>
                

                <div class="row mt-2">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <h4>Solicitud de trabajo</h4>
                        <p class="text-capitalize">
                            {{model.solicitud}}
                        </p>
                    </div>
                </div>

                <div class="mt-3">
                    <h4>Estado del vehiculo</h4>
                    <div class="row">
                        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3" *ngFor="let group of groupAccesorios">
                            <div *ngFor="let accesorio of group">
                                <img [src]="accesorio.checked?'/assets/img/check_box-black.svg':'/assets/img/check_box_outline.svg'" alt="check">
                                <span style="top:-5px; position:relative">
                                    {{accesorio.nombre}}
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                            <p class="text-capitalize">
                                {{model.estado_vehiculo_otros}}
                            </p>
                        </div>
                    </div>
                </div>

                <div class="mt-3">
                    <strong>Kilometraje actual</strong>
                    <span class="text-capitalize">
                        {{model.km_actual}}
                    </span>
                </div>
                <div class="mt-3">
                    <strong>Proximo cambio</strong>
                    <span class="text-capitalize">
                        {{model.proximo_cambio}}
                    </span>
                </div>
                <div class="mt-3 mb-3">
                    <strong>Pago</strong>
                    <span class="text-capitalize">
                        {{model.pago}} <br>
                        {{model.detalle_pago}}
                    </span>
                </div>


                <mat-divider></mat-divider>

                

                <div class="row pt-3">
                    <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10">
                        <h4 class="text-capitalize">Mano de obra extra</h4>
                    </div>
                    <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 text-right">
                        <button class="mt-2" mat-mini-fab (click)="addManoObra()">
                            <mat-icon>add</mat-icon>
                        </button>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <mat-list class="full-width">
                            <mat-list-item *ngFor="let item of model.manosobra">
                                <div mat-line>
                                    {{item.descripcion}}
                                    <button mat-icon-button (click)="addManoObra(item, true)" style="position: absolute; top:5px; right: 5px;">
                                        <mat-icon>edit</mat-icon>
                                    </button>
                                </div>
                                <div mat-line *ngIf="userData.type == 1 && item.precio"> 
                                    <strong>
                                        {{item.precio | number}}  Bs.
                                    </strong>
                                </div>
                            </mat-list-item>
                        </mat-list>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10 text-right">
                        <strong>Total</strong> {{model.totalManoObra | number}} Bs.
                    </div>
                </div>
                
                <mat-divider></mat-divider>

                <div class="row pt-3">
                    <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10">
                        <h4 class="text-capitalize">Detalle de respuestos e insumos</h4>
                    </div>
                    <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 text-right">
                        <button class="mt-2" mat-mini-fab (click)="addRepuesto()">
                            <mat-icon>add</mat-icon>
                        </button>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <mat-list class="full-width">
                            <mat-list-item *ngFor="let item of model.repuestos">
                                <div mat-line>
                                    {{item.repuesto}}
                                    <button mat-icon-button (click)="addRepuesto(item, true)" style="position: absolute; top:5px; right: 5px;">
                                        <mat-icon>edit</mat-icon>
                                    </button>
                                </div>
                                <div mat-line *ngIf="userData.type == 1 && item.precio">
                                    <strong>
                                        {{item.precio | number}} Bs.
                                    </strong>
                                </div>
                            </mat-list-item>
                        </mat-list>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10 text-right">
                        <strong>Total</strong> {{model.totalRepuesto | number}} Bs.
                    </div>
                </div>

                <div class="pt-3" *ngIf="model.mecanico">
                    <strong>Mecanico responsable</strong> <br>
                    <mat-card class="p-1" [routerLink]="['/mecanicos/show']"
                        [queryParams]="{id:model.mecanico.id}">
                        <table class="full-width">
                            <tbody>
                                <tr>
                                    <td class="text-center" style="width: 22%;">
                                        <img mat-card-avatar src="{{model.mecanico.foto}}" alt="foto" *ngIf="model.mecanico.foto"
                                            class="foto-image-table-mobile">
                                        <img src="/assets/img/no-image-user.svg" alt="foto" *ngIf="!model.mecanico.foto"
                                            class="foto-image-table-mobile">
                                    </td>
                                    <td>
                                        <strong> {{model.mecanico.nombre_completo}} </strong> <br>
                                        <small> Ci: </small>
                                        <small> {{model.mecanico.ci}} </small> <br>
                                        <small> Telefono: </small>
                                        <small> {{model.mecanico.telefono}} </small>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </mat-card>

                    <!-- <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10 text-center">
                        <strong>Mecanico responsable</strong> <br> 
                        <img *ngIf="model.mecanico.foto" src="{{model.mecanico.foto}}" width="100" height="auto" alt="foto" class="foto-image">
                        <br>
                        <span class="text-capitalize">
                            {{model.mecanico.nombre_completo}}
                        </span>
                    </div> -->
                </div>
                

            </mat-card-content>
            <mat-card-actions class="text-center">
                <div class="d-block d-sm-block d-md-none d-lg-none d-xl-none">
                    <button mat-flat-button  *ngIf="userData.type == 1" class="full-width mt-4" color="warn"  [routerLink]="[ '/ordenes/edit']" [queryParams]="{id:model.id}">
                        <mat-icon>edit</mat-icon>
                        Modificar
                    </button>
                    <button mat-flat-button class="full-width mt-4"  *ngIf="userData.type == 1" color="primary" (click)="printOrden()">
                        <mat-icon>print</mat-icon>
                        Imprimir entrada
                    </button>
                    <button mat-flat-button class="full-width mt-4 mb-5" *ngIf="userData.type == 1" color="accent" (click)="printOrdenSalida()">
                        <mat-icon>print</mat-icon>
                        Imprimir salida
                    </button>
                </div>


                
                <div class="d-none d-sm-none d-md-block d-lg-block d-xl-block">
                    <table class="full-width">
                        <tbody>
                            <tr>
                                <td class="text-center">
                                    <button mat-button class="p-2" [routerLink]="[ '/ordenes']">
                                        <mat-icon>clear</mat-icon>
                                        Cerrar
                                    </button>
                                </td>
                                <td class="text-center">
                                    <button mat-flat-button class="p-2" *ngIf="userData.type == 1" (click)="elminar()" color="warn">
                                        <mat-icon>delete</mat-icon>
                                        Eliminar
                                    </button>
                                </td>
                                <td class="text-center">
                                    <button mat-flat-button class="p-2" *ngIf="userData.type == 1" [routerLink]="[ '/ordenes/edit']" [queryParams]="{id:model.id}">
                                        <mat-icon>edit</mat-icon>
                                        Modificar
                                    </button>
                                </td>
                                <td class="text-center">
                                    <button mat-flat-button class="p-2" *ngIf="userData.type == 1" color="primary" (click)="printOrden()">
                                        <mat-icon>print</mat-icon>
                                        Imprimir entrada
                                    </button>
                                </td>
                                <td class="text-center">
                                    <button mat-flat-button class="p-2" *ngIf="userData.type == 1" color="accent" (click)="printOrdenSalida()">
                                        <mat-icon>print</mat-icon>
                                        Imprimir salida
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </mat-card-actions>
        </mat-card>
    </div>
</div>



<!-- reportes -->
<app-reporte-entrada #reporte id="reporte" class="visible-print" [groupAccesorios]="groupAccesorios" [model]="model"></app-reporte-entrada>

<app-reporte-salida #reporte2 id="reporte2" class="visible-print" [model]="model"></app-reporte-salida>
